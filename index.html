<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <title>VITÓRIA — Sistema de Portaria</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
    
  <header>
    <div class="brand">
      <div class="brand-info" style="display: flex; align-items: center; gap: 12px;">
        <div class="logo">V</div>
        <div class="header-text">
          <div class="title">VITÓRIA IMPORTAÇÃO E EXPORTAÇÃO</div>
          <div class="subtitle">Controle de portaria inteligente</div>
        </div>
      </div>
      <button id="btnLogout" class="btn btn-outline btn-sair">Sair</button>
    </div>

    <nav class="tabs" id="tabs">
      <button class="tab active" data-tab="registro">Registro de veículos</button>
      <button class="tab" data-tab="porteiros">Cadastro de porteiros</button>
      <button class="tab" data-tab="auditoria">Auditoria e relatórios</button>
    </nav>
  </header>

  <main class="container">
    <section class="card section-card" data-panel="registro">
      <div class="card-header">
        <div class="card-title">Registrar entrada/saída</div>
        <div class="badge" id="activeGuardBadge">Porteiro: Administrador</div>
      </div>
      
      <div class="card-body">
        <form id="formRecord">
          <div class="form-row">
            <div class="form-group">
              <label>Nome do visitante/morador</label>
              <input type="text" id="name" placeholder="Ex.: João Silva" required />
            </div>
            <div class="form-group">
              <label>Placa do veículo</label>
              <input type="text" id="plate" placeholder="Ex.: ABC1D23" required />
            </div>
            <div class="form-group">
              <label>Hora de entrada</label>
              <input type="datetime-local" id="inTime" />
            </div>
            <div class="form-group">
              <label>Hora de saída</label>
              <input type="datetime-local" id="outTime" />
            </div>
            <div class="form-group">
              <label>Porteiro responsável</label>
              <select id="guardSelect" required></select>
            </div>
          </div>

          <div class="button-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
            <button type="button" class="btn btn-outline" id="btnNowIn" onclick="document.getElementById('inTime').value = new Date().toLocaleString('sv-SE').slice(0,16).replace(' ', 'T')">Entrada agora</button>
            <button type="button" class="btn btn-outline" id="btnNowOut" onclick="document.getElementById('outTime').value = new Date().toLocaleString('sv-SE').slice(0,16).replace(' ', 'T')">Saída agora</button>
          </div>

          <div class="action-buttons" style="display: flex; flex-direction: column; gap: 10px;">
            <button type="submit" class="btn btn-primary" style="width: 100%;">Salvar registro</button>
            <button type="reset" class="btn btn-outline" style="width: 100%;">Limpar</button>
          </div>
        </form>

        <div class="card" style="margin-top: 1.5rem;">
          <div class="card-header">
            <div class="card-title">Últimos registros</div>
            <div class="badge" id="countBadge">0 registros</div>
          </div>
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th>Nome</th><th>Placa</th><th>Entrada</th><th>Saída</th><th>Porteiro</th>
                </tr>
              </thead>
              <tbody id="recentTable"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <section class="card section-card" data-panel="porteiros" style="display:none">
      <div class="card-header">
        <div class="card-title">Gestão de Porteiros</div>
      </div>
      <div class="card-body">
        <form id="formGuard">
          <div class="form-row">
            <div class="form-group">
              <label>Nome do porteiro</label>
              <input type="text" id="guardName" placeholder="Ex.: Maria Souza" required />
            </div>
            <div class="form-group">
              <label>Matrícula (opcional)</label>
              <input type="text" id="guardId" placeholder="Ex.: P-102" />
            </div>
          </div>
          <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 10px;">Adicionar porteiro</button>
        </form>
        
        <div class="table-responsive" style="margin-top: 1.5rem;">
          <table>
            <thead>
              <tr><th>Nome</th><th>Matrícula</th><th>Ações</th></tr>
            </thead>
            <tbody id="guardsTable"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="card section-card" data-panel="auditoria" style="display:none">
      <div class="card-header"><div class="card-title">Relatórios</div></div>
      <div class="card-body">
        <div class="form-row">
          <div class="form-group">
            <label>Filtrar por Porteiro</label>
            <select id="auditGuardFilter"></select>
          </div>
          <div class="form-group">
            <label>Data Início</label>
            <input type="date" id="auditStart" />
          </div>
          <div class="form-group">
            <label>Data Fim</label>
            <input type="date" id="auditEnd" />
          </div>
        </div>
        <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 1rem;">
          <button class="btn btn-primary" id="btnFilter">Filtrar</button>
          <button class="btn btn-outline" id="btnExport">Gerar PDF / Imprimir</button>
        </div>
      </div>
    </section>
  </main>

  <div class="toast" id="toast"></div>
  <script src="script.js" defer></script>
</body>
</html>
